
  <style>
  .container{
    display:flex;
  }
  .label{
    flex:1;
    vertical-align: middle;
    text-align: center;
  }
  .x{
    flex:3;
    text-align: center;    
    margin: 10px;
  }
  .y{
    flex:3;
    text-align: center;    
    margin-top: 10px;
    margin-bottom:10px;
}
  .z{
    flex:3;
    text-align: center;    
    margin:10px;
  }
  h1{
    text-align: center;
  } 
      #alert {
      opacity: 0;
      padding: 20px;
      background-color: #f44336; /* Red */
      color: white;
      margin-bottom: 15px;
      transition: 0.6;
    }
    
   </style>
 
  <h1> Dynamic Data Monitoring </h1>
  <div id="labelAccel" class="label">
    
  <h2>Alert Messages</h2>


    <div id="alert">
        <strong>Danger!</strong> Container breached.
    </div>


      <h2> Raw Data </h2>
    <div class="container">
    
    <div class="x">     
        <canvas id="temp"></canvas>
         </div>
    <div class="y">
        <canvas id="hum" ></canvas>
          </div>
    <div class="z">
        <canvas id="light" ></canvas>
          </div>        
    </div>
    
    <h2> Average Data </h2>
    
    <div class="container">
    <div class="x"> 
      <canvas id="avgTemp"></canvas>
    </div>
    <div class="y"> 
      <canvas id="avgHumid"></canvas>
    </div>
    <div class="z"> 
      <canvas id="avgLight"></canvas>
    </div>
  </div>
 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script>    
    
    //Collecting Data
    var tempData = [39.00, 39.00, 39.00, 39.00, 39.00, 39.00, 39.00];
    var humData = [492, 492, 492, 492, 492, 492, 492];
    var lightData = [0, 0, 0, 0, 0, 0, 0];
    var avgTempData = [33.43,39.0,39.0,39.0,39.0,39.0,39.0];
    var avgHumData = [421.71,492.0,492.0,492.0,492.0,492.0,492.0];
    var avgLightData = [0.0,0.0,0.0,0.0,0.0,0.0,0.0];
    
    
    //////////////////////////////LINE CHARTS//////////////////////////////////////////
    
    var ctx = document.getElementById('temp').getContext('2d');
    var tempChart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ['t1' , 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Temperature',
                backgroundColor: 'rgb(236, 219, 83)',
                fill: false,
                borderColor: 'rgb(236, 219, 83)',
                data: tempData
            }
            ]
        },
        // Configuration options go here
        options: {       
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });    
  
  
    var cty = document.getElementById('hum').getContext('2d');
    var humidChart = new Chart(cty, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ['t1', 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Humidity',
                backgroundColor: 'rgb(227, 65, 50)',
                fill: false,
                borderColor: 'rgb(227, 65, 50)',
                data: humData
            }
            ]
        },

        // Configuration options go here
        options: {
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });
    
    var ctz = document.getElementById('light').getContext('2d');
    var lightChart = new Chart(ctz, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ['t1', 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Light',
                backgroundColor: 'rgb(108, 60, 220)',
                fill: false,
                borderColor: 'rgb(108, 60, 220)',
                data: lightData
            }
            ]
        },

        // Configuration options go here
        options: {
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });


    //////////////////////////////BAR CHARTS//////////////////////////////////////////
    var barCtx = document.getElementById('avgTemp').getContext('2d');
    var barChart = new Chart(barCtx, {
        // The type of chart we want to create
        type: 'bar',
        // The data for our dataset
        data: {
            labels: ['t1', 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Temperature',
                backgroundColor: 'rgb(236, 219, 83)',
                fill: false,
                borderColor: 'rgb(236, 219, 83)',
                data: avgTempData
            }
            ]
        },
        // Configuration options go here
        options: {     
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });   
    
    var barCty = document.getElementById('avgHumid').getContext('2d');
    var barChart = new Chart(barCty, {
        // The type of chart we want to create
        type: 'bar',
        // The data for our dataset
        data: {
            labels: ['t1', 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Humidity',
                backgroundColor: 'rgb(227, 65, 50)',
                fill: false,
                borderColor: 'rgb(227, 65, 50)',
                data: avgHumData
            }
            ]
        },
        // Configuration options go here
        options: {   
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });   


    var barCtz = document.getElementById('avgLight').getContext('2d');
    var barChart = new Chart(barCtz, {
        // The type of chart we want to create
        type: 'bar',
        // The data for our dataset
        data: {
            labels: ['t1', 't2', 't3', 't4', 't5', 't6', 't7'],
            datasets: [{
                label: 'Light',
                backgroundColor: 'rgb(108, 60, 220)',
                fill: false,
                borderColor: 'rgb(108, 60, 220)',
                data: avgLightData
            }
            ]
        },
        // Configuration options go here
        options: {  
             responsive: true, 
            maintainAspectRatio: false,
            animation: {
                duration: 0
            }
        }
    });       
    
     //////////////////////////////CONTAINER OPEN ALERT/////////////////////////////////
    function con_Open(data){
            if (data[0]&&data[1]&&data[2]&&data[3]&&data[4]&&data[5]&&data[6])
                {
                    document.getElementById("alert").style.opacity="1";
                  }
              else
                document.getElementById("alert").style.opacity="0";
        }
    con_Open(lightData);
    
        ///// NOT USING ////
    const getAvg = arr => {
    const sum = arr.reduce((total, currentValue) => total + currentValue);
    return sum/arr.length;
    barChart.data.datasets[0]
     }
    var getAvgTemp = [getAvg(tempData)];
    var getAvgHum = [getAvg(humData)];
    var getAvgLight = [getAvg(lightData)];
    
    window.setTimeout(function () {
    window.location.reload();
    },1000);

    </script>
  
                